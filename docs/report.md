## 页面置换算法的调研及ZSWAP的实现

### 背景介绍

在虚拟内存系统中，页面置换是一个非常重要的问题。好的页面置换策略和实现可以极大的提高虚拟内存的性能。但由于程序行为具有极大的不确定性，设计出能适应于各种场景下的置换策略和支撑系统几乎是不可能完成的任务。

### 实验概述

这次课程设计主要分为两部分：

1. 页面置换策略的调查研究。主要目标是页面置换策略的数学模型，理论工作和真实系统上的例子，形成比较完整的调研报告。通过分析页面置换问题的理论模型，了解真实系统上的实现及深层次的考虑，加深对操作系统的了解和认识。
2. **这里填写第二部分的任务概述**

### 期望成果

- 用于模拟页面置换策略的模拟器。支持编写测例、从文件读入访存序列，并测试各种算法的miss/hit/竞争比。
- 页面置换策略的调研报告。讨论过去对页面置换问题的研究，主要关心用于分析各种策略的数学模型。

- ZSWAP的分析文档。讨论ZSWAP如何保证高效、稳定，如何和操作系统的其他子系统协同。

- 在ucore/rcore上实现ZSWAP。

### 前期工作

#### 页面置换算法调研

##### 文献调研

- [1] Belady, L. A . A study of replacement algorithms for a virtual-storage computer[J]. IBM Systems Journal, 1966, 5(2):78-101. 首次完整介绍了页面置换问题的几种算法，提出了离线意义下的最优算法MIN，提出了使用在线算法缺页次数和MIN缺页次数的比来评价在线算法的优劣。 

- [2] Fiat A , Karp R M , Luby M , et al. Competitive paging algorithms[J]. Journal of Algorithms, 1991, 12(4):685-699. 利用竞争性分析的手段证明了随机标记算法是竞争比意义下几乎最优的算法。竞争比是在线算法开销和最优算法开销的比，通过引入竞争性分析的手段，对各种置换算法的细节有了初步的分析。在前期工作中已经通过阅读论文和查阅网上相关资料，在调研报告中完成了一些关键定理的证明。

- [3] Denning P J. Working Sets Past and Present[J]. IEEE Transactions on Software Engineering, 1980, 6(1): 64-84. 关于工作集模型和工作集置换算法的综述，完整介绍了工作集模型提出的前因后果，还未完成阅读。

- [4] Borodin A, Raghavan P, Irani S, et al. Competitive paging with locality of reference[J]. symposium on the theory of computing, 1991, 50(2): 249-259. 通过引入“访存图”的概念使得模型包含了访存的局部性，在新的模型上使用竞争性分析，得到了更加贴近实践经验的结论。

##### 实践工作

- 已经完成了基本的模拟页面置换算法的框架， 可以编写测例测试各种算法的性能，计划实现LIRS等较新的算法，使用简单测例和真实的访存序列进行测试。
- 粗略阅读了《深入理解Linux内核》中关于页面置换问题的讨论，计划在中期更加详细的了解Linux中的策略。

#### ZSWAP的实现

**这里填写第二部分的前期工作**

### 时间规划

#### 页面置换算法调研

- 第一阶段，进一步完成文献调研和资料整理的工作。我们认为着眼于程序访问内存的模型是比较好的选择。目前认为比较好的工作有：

  - 工作集模型：主要的参考文献有[3]及其衍生工作。利用工作集这一概念表示程序的访存规律。

  - 访存图模型：程序的访存很可能依附于程序使用的数据结构。在非线性的数据结构上，局部性原理失效了，取而代之的是在图上的邻近。这一思想来源于早期调研中发现的[4]的工作。

- 第二阶段，在模拟环境中实现LIRS算法，并结合真实访存序列测试性能，分析其优势所在。

- - 实验环境：模拟环境已经基本完成实现。
  - 遇到的困难主要有：
    1. 如何采集真实程序访存数据
    2. 理解和实现LIRS

- 第三阶段，了解Linux中关于页面置换问题的实现，通过阅读相关文档了解Linux如何将页面置换和其他子系统结合，并将调研内容是实现在ZSWAP中。

#### ZSWAP的实现

**这里填写第二部分的时间规划**

